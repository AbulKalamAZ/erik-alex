"use client";

import Image from "next/image";
import Link from "next/link";
import { gsap } from "gsap";
import { useEffect, useRef } from "react";
import { color } from "framer-motion";

export default function GlassSection({ isOpen, setIsOpen }) {
  const glassRef = useRef(null);
  const svgRef = useRef(null);

  useEffect(() => {
    if (isOpen && glassRef.current) {
      gsap.fromTo(
        glassRef.current,
        { scale: 0.25 }, // shorthand for scale3D(.25, .25, .25)
        {
          scale: 1,
          duration: 1.5,
          ease: "power3.out",
        }
      );
      gsap.fromTo(
        svgRef.current,
        { color: "black" },
        {
          color: "rgb(14,179,46)",
          duration: 1,
          delay: 1,
          ease: "power2.out",
        }
      );
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <section className="relative w-full bg-cover bg-center z-[999999] justify-center items-center flex overflow-hidden py-20">
      {/* Go Back Button */}
      <div className="absolute -top-1 right-4 z-[9999999]">
        <Link
          href="#"
          className="px-4 py-2 text-white text-4xl font-bold hover:text-black transition"
          onClick={() => setIsOpen(null)}
        >
          Go Back
        </Link>
      </div>

      {/* Centered Image Container */}
      <div
        ref={glassRef}
        className="glass-container flex flex-col justify-center items-center"
      >
        <div className="min-w-[140vw] h-[750px] relative">
          <Image
            src="/sunglass.svg"
            alt="sunglass"
            fill
            className="object-cover"
          />

          <div
            ref={svgRef}
            className="glassesFrame"
            style={{
              opacity: 0.6,
              mixBlendMode: "multiply",
              justifyContent: "center",
              alignItems: "center",
              minWidth: "140vw",
              display: "flex",
              position: "absolute",
              inset: "0%",
            }}
          >
            <svg
              width="2523"
              height="957"
              viewBox="0 0 2523 957"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2117.37 233.158C2115.76 222.381 2113.73 213.531 2099.2 215.31C2086.23 216.895 2072.99 212.36 2060.02 218.748C2054.51 221.455 2046.86 220.187 2040.18 220.187C1934.19 220.26 1828.18 220.26 1722.19 220.235C1714.59 220.235 1706.74 221.357 1700.06 215.944C1699.01 215.091 1696.91 215.31 1695.33 215.31C1648.42 215.31 1601.51 215.31 1554.62 215.31C1552.6 215.31 1550.31 214.945 1548.84 216.578C1546.16 219.602 1542.72 219.26 1539.29 219.26C1501.32 219.26 1463.34 219.333 1425.38 219.163C1419.72 219.138 1414.16 221.284 1408.43 219.626C1403.56 218.212 1401.8 220.43 1401.82 225.234C1401.95 243.495 1401.9 261.757 1401.95 280.018C1401.95 281.823 1401.41 284.188 1403 285.212C1407.94 288.43 1406.82 293.233 1406.85 297.792C1406.9 304.887 1406.85 311.982 1406.85 319.101C1406.85 324.49 1405.77 330.171 1411.65 333.755C1413.09 334.632 1412.72 336.68 1413.02 338.265C1414.87 347.92 1413.63 357.697 1414.04 367.401C1414.14 369.595 1413.48 372.204 1415.7 373.569C1419.11 375.69 1418.96 378.836 1418.96 382.103C1418.94 392.44 1418.92 402.802 1418.96 413.14C1418.96 414.944 1418.65 417.651 1419.65 418.382C1425.77 422.917 1423.79 429.28 1423.94 435.108C1424.06 439.447 1423.57 443.714 1429.13 445.372C1431.13 445.957 1431.08 448.225 1431.18 450.078C1431.28 451.906 1431.18 453.832 1432.55 455.246C1437.08 459.903 1437.45 466.632 1441.59 471.826C1447.32 478.994 1448.52 489.234 1456.05 495.646C1458.46 497.694 1460.85 500.059 1459.71 504.009C1459.27 505.472 1460.53 506.715 1461.8 507.422C1464.29 508.812 1464.83 511.25 1465.02 513.64C1465.29 516.712 1466.68 518.565 1469.09 520.564C1472.73 523.587 1476.68 526.927 1477.31 532.072C1477.82 536.265 1480.28 538.752 1483.06 541.58C1490.21 548.822 1501.08 553.064 1502.59 565.035C1502.69 565.889 1503.76 566.644 1504.47 567.376C1508.4 571.301 1510.59 577.153 1516.95 578.372C1517.56 578.494 1518.39 579.518 1518.42 580.152C1518.59 585.686 1523.32 587.198 1526.8 589.709C1531.24 592.879 1534.65 596.706 1535.7 602.192C1536.09 604.289 1536.99 605.898 1538.43 607.459C1550.11 620.039 1563.57 630.865 1574.47 644.226C1578.37 649.029 1584.25 651.954 1588 656.636C1591.83 661.439 1594.56 666.754 1601.82 666.339C1603.04 666.266 1604.04 666.803 1605.07 667.68C1614.6 675.799 1620.11 688.77 1634.03 691.55C1634.2 691.574 1634.32 691.818 1634.47 691.964C1639.71 696.67 1643.47 703.521 1651.76 703.935C1652.39 703.96 1652.93 705.008 1653.59 705.471C1661.73 711.079 1668.75 718.613 1679.28 720.051C1680.19 720.173 1681.26 720.905 1681.77 721.66C1685.72 727.707 1691.28 730.974 1698.15 733.193C1707.98 736.362 1715.93 744.603 1727.19 744.286C1727.78 744.286 1728.39 744.554 1728.92 744.798C1740.41 749.991 1752.23 753.746 1765.06 752.893C1766.28 752.82 1767.5 752.868 1768.71 752.893C1773.98 753.015 1779.98 751.284 1782.44 758.403C1782.61 758.866 1783.32 759.329 1783.88 759.451C1789.83 760.792 1795.75 761.377 1801.92 760.28C1805.14 759.72 1806.21 757.745 1807.72 755.624C1808.92 753.941 1810.82 753.99 1812.67 753.795C1826.01 752.356 1839.83 757.062 1852.85 749.333C1856.85 746.944 1862.14 747.407 1867.14 744.286C1872.41 740.995 1880.01 739.678 1886.57 737.435C1892.35 735.46 1897.18 729.901 1904.13 731.291C1904.4 731.34 1905.01 730.925 1905.08 730.633C1906.74 724.708 1912.08 724.391 1916.66 722.562C1919.1 721.587 1921.73 719.856 1923.02 717.15C1924.1 714.882 1925.75 713.907 1928.22 713.59C1930.9 713.249 1932.78 711.347 1934.87 709.665C1941.99 703.96 1947.7 696.743 1954.43 690.818C1964.23 682.187 1973.35 673.093 1981.78 663.243C1983.76 660.951 1988.07 660.098 1987.93 656.904C1987.63 650.296 1992.56 647.468 1996.14 643.592C1997.85 641.763 1999.39 639.813 1999.46 637.277C1999.56 634.522 2001.38 633.205 2002.99 631.352C2006.58 627.256 2011.7 624.013 2011.75 617.552C2011.75 615.358 2013.55 613.993 2015.01 612.603C2018.99 608.751 2023.91 605.532 2023.64 598.925C2023.6 597.535 2024.96 596.658 2026.03 595.634C2030.3 591.66 2036.32 588.758 2035.1 581.2C2034.81 579.42 2036.59 578.469 2038.08 577.738C2039.64 576.958 2040.81 575.812 2040.71 573.983C2040.54 571.009 2041.95 569.034 2044.22 567.351C2045.71 566.254 2046.78 564.791 2046.93 562.792C2047.37 556.185 2051.78 550.894 2054.54 545.506C2057.41 539.849 2057.41 532.072 2064.02 528.366C2064.41 528.146 2064.41 527.244 2064.56 526.659C2066.24 520.003 2070.48 514.078 2069.92 506.788C2069.8 505.106 2070.85 503.741 2072.55 503.058C2074.11 502.449 2075.84 501.473 2075.87 499.791C2075.94 492.379 2081.18 486.162 2081.18 479.091C2081.18 469.339 2090.77 462.805 2089.01 452.76C2088.91 452.199 2089.74 451.297 2090.35 450.833C2093.33 448.566 2093.47 445.445 2093.45 442.081C2093.4 436.01 2092.86 429.89 2094.4 423.916C2095.37 420.137 2098.59 417.504 2098.67 412.969C2098.74 407.947 2099.13 402.875 2099.28 397.829C2099.32 395.805 2099.01 393.464 2100.86 392.196C2107.15 387.857 2106.35 381.786 2105.81 375.398C2105.35 369.668 2103.79 363.427 2107.69 358.307C2109.86 355.454 2110.42 352.601 2110.42 349.285C2110.42 335.096 2110.51 320.881 2110.42 306.691C2110.39 300.767 2109.91 294.842 2115.24 290.502C2116.56 289.429 2116.15 287.503 2116.46 285.919C2118.34 275.849 2117.22 265.707 2117.54 257.344C2117.54 248.079 2118.41 240.448 2117.32 233.084L2117.37 233.158Z"
                fill="CurrentColor"
              ></path>
              <path
                d="M405.289 233.158C406.899 222.381 408.922 213.531 423.453 215.31C436.424 216.895 449.663 212.36 462.634 218.748C468.144 221.455 475.8 220.187 482.48 220.187C588.466 220.26 694.476 220.26 800.461 220.235C808.068 220.235 815.919 221.357 822.599 215.944C823.647 215.091 825.744 215.31 827.329 215.31C874.238 215.31 921.148 215.31 968.033 215.31C970.057 215.31 972.349 214.945 973.812 216.578C976.494 219.602 979.931 219.26 983.369 219.26C1021.33 219.26 1059.32 219.333 1097.28 219.163C1102.93 219.138 1108.49 221.284 1114.22 219.626C1119.1 218.212 1120.85 220.43 1120.83 225.234C1120.71 243.495 1120.76 261.757 1120.71 280.018C1120.71 281.823 1121.25 284.188 1119.66 285.212C1114.71 288.43 1115.83 293.233 1115.81 297.792C1115.76 304.887 1115.81 311.982 1115.81 319.101C1115.81 324.49 1116.88 330.171 1111 333.755C1109.57 334.632 1109.93 336.68 1109.64 338.265C1107.79 347.92 1109.03 357.697 1108.62 367.401C1108.52 369.595 1109.18 372.204 1106.96 373.569C1103.54 375.69 1103.69 378.836 1103.69 382.103C1103.71 392.44 1103.74 402.802 1103.69 413.14C1103.69 414.944 1104.01 417.651 1103.01 418.382C1096.89 422.917 1098.86 429.28 1098.72 435.108C1098.59 439.447 1099.08 443.714 1093.52 445.372C1091.52 445.957 1091.57 448.225 1091.48 450.078C1091.38 451.906 1091.48 453.832 1090.11 455.246C1085.58 459.903 1085.21 466.632 1081.06 471.826C1075.34 478.994 1074.14 489.234 1066.61 495.646C1064.19 497.694 1061.8 500.059 1062.95 504.009C1063.39 505.472 1062.12 506.715 1060.85 507.422C1058.37 508.812 1057.83 511.25 1057.63 513.64C1057.37 516.712 1055.98 518.565 1053.56 520.564C1049.93 523.587 1045.98 526.927 1045.35 532.072C1044.83 536.265 1042.37 538.752 1039.59 541.58C1032.45 548.822 1021.57 553.064 1020.06 565.035C1019.97 565.889 1018.89 566.644 1018.19 567.376C1014.26 571.301 1012.07 577.153 1005.7 578.372C1005.09 578.494 1004.26 579.518 1004.24 580.152C1004.07 585.686 999.339 587.198 995.852 589.709C991.415 592.879 988.001 596.706 986.953 602.192C986.563 604.289 985.661 605.898 984.222 607.459C972.544 620.039 959.085 630.865 948.187 644.226C944.286 649.029 938.41 651.954 934.655 656.636C930.827 661.439 928.097 666.754 920.831 666.339C919.612 666.266 918.612 666.803 917.588 667.68C908.055 675.799 902.545 688.77 888.623 691.55C888.453 691.574 888.331 691.818 888.185 691.964C882.943 696.67 879.188 703.521 870.898 703.935C870.264 703.96 869.728 705.008 869.07 705.471C860.926 711.079 853.905 718.613 843.372 720.051C842.47 720.173 841.397 720.905 840.885 721.66C836.935 727.707 831.376 730.974 824.501 733.193C814.675 736.362 806.727 744.603 795.463 744.286C794.878 744.286 794.268 744.554 793.732 744.798C782.248 749.991 770.423 753.746 757.599 752.893C756.38 752.82 755.16 752.868 753.941 752.893C748.675 753.015 742.677 751.284 740.215 758.403C740.044 758.866 739.337 759.329 738.776 759.451C732.827 760.792 726.903 761.377 720.734 760.28C717.516 759.72 716.443 757.745 714.931 755.624C713.737 753.941 711.835 753.99 709.982 753.795C696.645 752.356 682.821 757.062 669.802 749.333C665.803 746.944 660.512 747.407 655.514 744.286C650.248 740.995 642.641 739.678 636.082 737.435C630.304 735.46 625.477 729.901 618.528 731.291C618.26 731.34 617.65 730.925 617.577 730.633C615.919 724.708 610.58 724.391 605.996 722.562C603.558 721.587 600.925 719.856 599.632 717.15C598.56 714.882 596.902 713.907 594.439 713.59C591.757 713.249 589.88 711.347 587.783 709.665C580.664 703.96 574.959 696.743 568.229 690.818C558.428 682.187 549.31 673.093 540.874 663.243C538.899 660.951 534.583 660.098 534.73 656.904C535.022 650.296 530.097 647.468 526.513 643.592C524.806 641.763 523.27 639.813 523.197 637.277C523.1 634.522 521.271 633.205 519.662 631.352C516.078 627.256 510.958 624.013 510.909 617.552C510.909 615.358 509.105 613.993 507.642 612.603C503.668 608.751 498.743 605.532 499.011 598.925C499.06 597.535 497.694 596.658 496.622 595.634C492.355 591.66 486.333 588.758 487.552 581.2C487.844 579.42 486.065 578.469 484.577 577.738C483.017 576.958 481.847 575.812 481.944 573.983C482.115 571.009 480.701 569.034 478.433 567.351C476.946 566.254 475.873 564.791 475.727 562.792C475.288 556.185 470.875 550.894 468.12 545.506C465.243 539.849 465.243 532.072 458.636 528.366C458.246 528.146 458.246 527.244 458.099 526.659C456.417 520.003 452.175 514.078 452.735 506.788C452.857 505.106 451.809 503.741 450.102 503.058C448.542 502.449 446.811 501.473 446.786 499.791C446.713 492.379 441.471 486.162 441.471 479.091C441.471 469.339 431.889 462.805 433.645 452.76C433.742 452.199 432.913 451.297 432.304 450.833C429.329 448.566 429.183 445.445 429.207 442.081C429.256 436.01 429.793 429.89 428.257 423.916C427.281 420.137 424.063 417.504 423.99 412.969C423.917 407.947 423.527 402.875 423.38 397.829C423.332 395.805 423.649 393.464 421.796 392.196C415.505 387.857 416.31 381.786 416.846 375.398C417.309 369.668 418.87 363.427 414.969 358.307C412.799 355.454 412.238 352.601 412.238 349.285C412.238 335.096 412.141 320.881 412.238 306.691C412.262 300.767 412.75 294.842 407.411 290.502C406.094 289.429 406.509 287.503 406.192 285.919C404.314 275.849 405.436 265.707 405.119 257.344C405.119 248.079 404.241 240.448 405.338 233.084L405.289 233.158Z"
                fill="CurrentColor"
              ></path>
            </svg>
          </div>
        </div>
      </div>
    </section>
  );
}
